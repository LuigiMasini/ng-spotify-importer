<h1>{{title}}</h1>

<app-spotify-auth></app-spotify-auth>

<div *ngIf="spotifyService.hasAuthenticated()" id="playlist-editor">
  <input (change)="handleFileInput($event)" type="file" id="fileInput"/>

  <div>
    <label for="playlist-load-progress">Loading playlist progress: </label>
    <progress id="playlist-load-progress" [value]="songsLoaded.count" [max]="songs.length"></progress>
  </div>

  <h2>Songs <span *ngIf="playlistName">- {{playlistName}}</span></h2>

  <pre *ngIf="songsUnmatched.length > 0">
    Unmatched Songs ({{songsUnmatched.length}}):
    <ng-container *ngFor="let song of songsUnmatched">
      &lt;song title="{{song.title}}" artistName="{{song.artist}}"/&gt;</ng-container>
  </pre>

  <table id="song-data">
    <tr *ngFor="let song of songs">
      <td class="song-title">{{song.title}}</td>
      <td class="song-artist">{{song.artist}}
        <a *ngIf="song.externalUrl" href="{{song.externalUrl}}" target="_blank">[open]</a>
      </td>
      <td class="song-preview">
        <audio controls *ngIf="song.previewUrl">
          <source src="{{song.previewUrl}}">
        </audio>
      </td>
    </tr>
  </table>
</div>
